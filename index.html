<!doctype html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Prediksi ARJ</title>
    <link rel="stylesheet" href="index.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script type="importmap">
      {
        "imports": {
          "@google/genai": "https://esm.run/@google/genai"
        }
      }
    </script>
  </head>
  <body>
    <div id="app-container">
      <img src="https://i.postimg.cc/hjqy34TJ/logo-ARJ-2-removebg-preview.png" alt="ARJ Predict Logo" class="arj-logo">
      <header>
        <div id="market-info">
          <div id="market-selector" class="market-select-wrapper" role="button" aria-haspopup="true" aria-expanded="false" tabindex="0">
            <div id="market-display-text">HONGKONG POOLS</div>
            <i class="fa-solid fa-chevron-down"></i>
          </div>
          <input type="date" id="market-date" aria-label="Tanggal Prediksi" />
        </div>
        <button id="settings-btn" aria-label="Pengaturan API Key">
          <i class="fa-solid fa-cog"></i>
        </button>
      </header>
      <main>
        <div class="input-section">
          <h2 id="data-header">Input BBFS</h2>
          <div id="bbfs-inputs-container">
            <!-- BBFS inputs will be dynamically generated here -->
          </div>
          <button id="predict-btn">
            <span class="button-text">Prediksi Angka Jitu</span>
            <span class="button-icon">✨</span>
          </button>
        </div>

        <div id="loader" class="hidden"></div>
        
        <div id="error-container" class="hidden">
          <p id="error-message"></p>
        </div>

        <div id="results-container" class="hidden">
            <div class="results-header-wrapper">
                <h2 class="results-header">Hasil Prediksi ARJ</h2>
                <button id="copy-btn" aria-label="Salin hasil prediksi">
                    <i class="fa-regular fa-copy"></i>
                    <span>Salin</span>
                </button>
            </div>
            <div id="prediction-output">
                <pre id="prediction-text"></pre>
            </div>
        </div>
      </main>
      <footer>
        <p>ʲᵃᵈⁱᵏᵃⁿ ᵖᵉʳᵇᵃⁿᵈⁱⁿᵍᵃⁿ- ᵗⁱᵈᵃᵏ ᵃᵈᵃ ʲᵃᵐⁱⁿᵃⁿ ᴶᴾ ¹⁰⁰%</p>
      </footer>
    </div>

    <!-- Market Selection Modal -->
    <div id="market-modal" class="modal-overlay hidden">
      <div class="modal-content">
        <div class="market-modal-header">
            <h3>Pilih Pasaran (Maks. 6)</h3>
            <span id="market-count">1/6 Dipilih</span>
        </div>
        <div id="market-list">
          <!-- Market items will be populated by JS -->
        </div>
        <div class="market-modal-actions">
            <button id="confirm-market-btn">Konfirmasi</button>
        </div>
      </div>
    </div>

    <!-- API Key Settings Modal -->
    <div id="settings-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3>Pengaturan API Key</h3>
            <p>Masukkan Gemini API Key Anda untuk menggunakan aplikasi. Kunci akan disimpan di browser Anda.</p>
            <input type="password" id="api-key-input" placeholder="Masukkan API Key Anda di sini">
            <div class="modal-actions">
                <button id="save-key-btn">Simpan</button>
                <button id="close-modal-btn">Tutup</button>
            </div>
        </div>
    </div>
    
    <!-- Toast Notification -->
    <div id="toast-notification" class="hidden"></div>

    <script type="module" src="/index.js"></script>
  </body>
</html>